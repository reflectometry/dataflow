<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>Edit Experiment</title>
		<script type="text/javascript" src="../../../../../../static/lib/yui/yahoo/yahoo-min.js"></script>
		
		<script type="text/javascript" src="../../../../../../static/lib/yui/event/event-min.js"></script>
		<script type="text/javascript" src="../../../../../../static/lib/yui/connection/connection-min.js"></script>
		<script type="text/javascript" src="../../../../../../static/lib/yui/json/json-min.js"></script>
	</head>
	<body>
		<div id="content-1" style="float:left;">
			<h2>EXPERIMENT: <i>{{ experiment.ProposalNum }}</i></h2>
			<form action="." method="POST">
				{% csrf_token %}
				<table>
					{{ form1.as_table }}
				</table>
				<p>
					<input type="submit" value="Save changes">
				</p>
			</form>
			<hr>
			</hr>
			<form action="#" method="POST" enctype="multipart/form-data">
				{% csrf_token %}
				<table>
					{{ form2.as_table }}
				</table>
			
				
				<p>
				<!--	
				<label for="files" > <strong>File Upload: </strong> </label>
				<input type="file" value = "File Upload" id="files" name="files[]" multiple  />
				<output id="list"></output>

				<script>
				  function handleFileSelect(evt) {
				    var files = evt.target.files; // FileList object

				    // files is a FileList of File objects. List some properties.
				    var output = [];
				    for (var i = 0, f; f = files[i]; i++) {
				      output.push('<li><strong>', f.name, '</strong> (', f.type || 'n/a', ') - ',
						  f.size, ' bytes, last modified: ',
						   '</li>');
				    }

				    //console.log(files[0])
				    TEST_TRANSFER = {'data': files[0].getAsBinary()}
				    //console.log(TEST_TRANSFER)
				    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
				    YAHOO.util.Connect.asyncRequest('POST', '.', function() {},YAHOO.lang.JSON.stringify(TEST_TRANSFER))
				  }

				  document.getElementById('files').addEventListener('change', handleFileSelect, false);
				</script>
								</p>
								-->
								
				<p>
					<input type="submit" value="Add entries">
				</p>
			</form>
			<hr>
			</hr>
			<form action="../../../../../../editor/" method="post">
				{% csrf_token %}
				<input type="hidden" name="language" value={{ experiment.instrument.instrument_class }} />
				<input type="hidden" name="experiment_id" value={{ experiment.id }} />
				<p>
					<input type="submit" value="Start reducing!">
				</p>
			</form>
			<!--<a STYLE="text-decoration:none" href="editor/"> Start reducing! </a>-->
		</div>
		<div id="content-2" style="float:left;margin-left:7%">
			<h2> Templates: </h2>
			{% for template in experiment.templates.all %}
			<li>
			    <form action="#" method="post">
				{% csrf_token %}
				<input type="hidden" value = "{{template.Title}}" name="delete_templates">
				{{ template.Title }} <input type="submit" value="delete">
				</form>
				
			</li>
			{% endfor %} <h2> Files: </h2>
			{% for file in experiment.Files.all %}
			<li>

				<form action="#" method="post">
				{% csrf_token %}
				<input type="hidden" value = "{{file.friendly_name}}" name="delete_files">
				{{file.friendly_name }} <input type="submit" value="delete">
				</form>
			</li>
			{% endfor %}
		</div>
	</body>
</html>
